<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <title>RPG Game</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">  
</head>
<body>
    <div id="wrapper">

        <!-- ==============CHARACTER SELECTION============== -->

        <div id="heroSelect" class="gameArea">
            <h1>Choose your Pokemon!</h1>
        </div>

        <!-- ==============OPPONENT SELECTION============== -->

        <div id="enemySelect" class="gameArea">
            <h1>Choose your opponent!</h1>
        </div>

        <!-- ==============OPPONENT ENCOUNTER============== -->

        <div id="encounter" class="gameArea">
            <h1 id="encounterWords"></h1>
            <img id="encounterImg">
        </div>

        <!-- ==============BATTLE============== -->
        
        <div id="arena" class="gameArea">
            <div>
                <h3 id="enemyHP">HP: </h3> 
                <progress id="enemyHPBar" value="100" max="100"></progress>
                <img id="enemyImg">
                <img id="enemyDMG">

            </div>
            <div>
                <h3 id="heroHP">HP: </h3>
                <progress id="heroHPBar"></progress>
                <img id="heroImg">
                <img id="heroDMG">
                <button id="attack-btn">
                <span class="attackBoost"></span>ATTACK</button> 
            </div>
        </div>

        <!-- ==============RESULTS============== -->

        <div id="winOrLose" class="gameArea">
            <h1>RESULTS</h1>
        </div>

        <!-- ==============JAVASCRIPT============== -->

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        



        var characterBulbasaur = {
            name: "Bulbasaur",
            currentHitPoints: 89,    //change this in arenaChar
            hitPoints: 100,
            attackPower: 6,         //this will go up my its base attack power
            baseAttackIncrement: 6,     //for now, it will be 6
            counterAttack: 10,          //for now it iwll be 20
            difficulty: "Easy",        //for now, might put it in stars
            frontImg: "assets/images/bulbasaur1.gif",
            backImg: "assets/images/bulbasaur2.gif",
            profImg: "assets/images/bulbasaur-profile.png"
        };

        var characterPorygon2 = {
            name: "Porygon2",
            currentHitPoints: 100,    //change this in arenaChar
            hitPoints: 130,
            attackPower: 10,         //this will go up my its base attack power
            baseAttackIncrement: 6,     //for now, it will be 6
            counterAttack: 15,          //for now it iwll be 20
            difficulty: "Hard",        //for now, might put it in stars
            frontImg: "assets/images/porygon21.gif",
            backImg: "assets/images/porygon22.gif",
            profImg: "assets/images/porygon2-profile.png",
        };

        var characterGengar = {
            name: "Gengar",
            currentHitPoints: 150,    //change this in arenaChar
            hitPoints: 170,
            attackPower: 14,         //this will go up my its base attack power
            baseAttackIncrement: 6,     //for now, it will be 6
            counterAttack: 20,          //for now it iwll be 20
            difficulty: "Very Hard",        //for now, might put it in stars
            frontImg: "assets/images/gengar1.gif",
            backImg: "assets/images/gengar2.gif",
            profImg: "assets/images/gengar-profile.png"
        };

        var characterMewtwo = {
            name: "Mewtwo",
            currentHitPoints: 190,    //change this in arenaChar
            hitPoints: 200,
            attackPower: 18,         //this will go up my its base attack power
            baseAttackIncrement: 6,     //for now, it will be 6
            counterAttack: 25,          //for now it iwll be 20
            difficulty: "Master",        //for now, might put it in stars
            frontImg: "assets/images/mewtwo1.gif",
            backImg: "assets/images/mewtwo2.gif",
            profImg: "assets/images/mewtwo-profile.png"
        };

        var char = [];
        char[0] = characterBulbasaur;
        char[1] = characterPorygon2;
        char[2] = characterGengar;
        char[3] = characterMewtwo;
        var enemyChar;
        var heroChar;
        var getHero;
        var getOpponent;  
        var challenge;
        var battle;
        var hideScenes;
        var unhide;
   

        hideScenes = function() {
            $("#heroSelect").addClass('hidden');
            $("#enemySelect").addClass('hidden'); 
            $("#encounter").addClass('hidden');
            $("#arena").addClass('hidden');
            $("#winOrLose").addClass('hidden');
        }

        unhide = function() {
            $(this).removeClass('hidden');
        }

        getHero = function() {
            hideScenes();
            $('#heroSelect').removeClass('hidden');
            
                for (var i = 0; i <= 3; i++) {
                    var hero = $("<img>");
                    hero.addClass("heroes");
                    hero.attr('src', char[i].profImg);
                    hero.attr('width', "130px");
                    hero.attr('height', "130px");
                    hero.attr('id', 'heroID' + i);
                    $("#heroSelect").append(hero);
            }     

            $("#heroID0").on("click", function() {
                heroChar = char[0];
                alert("You choose " + heroChar.name + "!");
                hideScenes();
                getOpponent();
                return heroChar;
            });

            $("#heroID1").on("click", function() {
                heroChar = char[1];
                alert("You choose " + heroChar.name + "!");
                hideScenes();
                getOpponent();
                return heroChar;
            });

            $("#heroID2").on("click", function() {
                heroChar = char[2];
                alert("You choose " + heroChar.name + "!");
                hideScenes();
                getOpponent();
                return heroChar;
            });

            $("#heroID3").on("click", function() {
                heroChar = char[3];
                alert("You choose " + heroChar.name + "!");
                hideScenes();
                getOpponent();
                return heroChar;
            });
        }

        getOpponent = function() {
            hideScenes();
            $('#enemySelect').removeClass('hidden');
            
            // $("enemySelect").append("<h1>Choose your opponent!</h1>");
            //cant get this to work
            
            for (var i = 0; i <= 3; i++) {
                var enemy = $("<img>");
                enemy.addClass('enemies');
                enemy.attr('src', char[i].profImg);
                enemy.attr('width', "130px");
                enemy.attr('height', "130px");
                enemy.attr('id', 'enemyID' + i);
                $("#enemySelect").append(enemy);
            }     

            $("#enemyID0").on("click", function() {
                enemyChar = char[0];
                alert("Your enemy is " + enemyChar.name + "!");
                hideScenes();
                challenge();
                return enemyChar;
            });

            $("#enemyID1").on("click", function() {
                enemyChar = char[1];
                alert("Your enemy is " + enemyChar.name + "!");
                hideScenes();
                challenge();
                return enemyChar;
            });

            $("#enemyID2").on("click", function() {
                enemyChar = char[2];
                alert("Your enemy is " + enemyChar.name + "!");
                hideScenes();
                challenge();
                return enemyChar;
            });

            $("#enemyID3").on("click", function() {
                enemyChar = char[3];
                alert("Your enemy is " + enemyChar.name + "!");
                hideScenes();
                challenge();
                return enemyChar;
            });
        }

        challenge = function() {
            $('#encounter').removeClass('hidden');
            $('#encounterWords').append("Enemy " + enemyChar.name + " challenges you!");
            $('#encounterImg').attr("src", enemyChar.profImg);
            $('#encounterImg').after("<br><br><br><br><h1>Click anywhere to battle!</h1>");
            $("#encounter").on("click", function() {
                hideScenes();
                battle();
            });
        }

        battle = function(){
            // =============BATTLE STUFF==========
            $('#arena').removeClass('hidden');

            $("#enemyImg").attr("src", enemyChar.frontImg);
            $("#heroImg").attr("src", heroChar.backImg);

            $("#enemyHP").prepend("Enemy " + enemyChar.name +  "\'s ").append(enemyChar.currentHitPoints).append("/").append(enemyChar.hitPoints);
            $("#heroHP").prepend(heroChar.name +  "\'s ").append(heroChar.currentHitPoints).append("/").append(heroChar.hitPoints);

            //this populates the HP bars 
            
            $("#heroHPBar").attr("max", heroChar.hitPoints);
            $("#heroHPBar").attr("value", heroChar.currentHitPoints);
            $("#enemyHPBar").attr("max", enemyChar.hitPoints);
            $("#enemyHPBar").attr("value", enemyChar.currentHitPoints);

            // really this code shouldnt be on this button but im gonna keep it here for now
            $("#attack-btn").on("click", function() {


                $("#attack-btn").attr("disabled","disabled");
        //set this on a timer
                
                $("heroImg").addClass("heroAnimIn");
                $("#enemyDMG").attr("src", "assets/images/boom.png");
                
                    function heroReturn(){
                        $("#enemyDMG").removeAttr("src", "assets/images/boom.png");
                        $("#heroImg").removeClass("heroAnimIn");
                    }
                setTimeout(heroReturn, 160);
// YOU ATTACK! THEN CODE ABOUT ENEMY COUNTER-ATTACKS!
                $("#enemyImg").addClass("enemyAnimIn");
                $("#heroDMG").attr("src", "assets/images/boom.png");

// IF STATEMENT IF HERO HP < MAX, ENEMY WILL ATTACK
                    function enemyReturn(){
                        $("#heroDMG").removeAttr("src", "assets/images/boom.png");
                        $("#enemyImg").removeClass("enemyAnimIn");
                    }
                setTimeout(enemyReturn, 160);
//IF STATEMENT IF HERO HP <= 0, YOU LOSE, ELSE, ATTACK AGAIN, INCREMENT ATTACK, NARRATE INCREASE

// ==============================
                // 
                // $("heroHPBar").attr("max", heroChar.hitPoints);
                // $("heroHPBar").attr("value", heroChar.currentHitPoints);
                

                // let HHP = document.getElementById("heroHPbar");

                // console.log(HHP);
                // HHP.value -= 10; 
                //Or whatever you want to do with it.

                        // IF HERO STILL HAS HP, RUN GET OPPONENT AGAIN

            });
        

        }


        getHero();
        console.log(heroChar);


    </script>
    
</body>
</html>
